---
import { Image } from "astro:assets";
import FormattedDate from "./FormattedDate.astro";

const {
  post: { imagePath2, title, updateDate },
} = Astro.props;

function convertToDate(arr: [number, number, number]): Date {
  return new Date(arr[0], arr[1] - 1, arr[2]); // 월은 0부터 시작하므로 -1 해줍니다.
}
const date = convertToDate(updateDate);
---

<div
  class="relative h-[200px] overflow-hidden bg-primary-50 dark:bg-opacity-10 rounded-lg"
  class:list={Astro.props.class}
>
  {
    imagePath2 && (
      <Image
        src={imagePath2}
        alt={title}
        width={1}
        height={1}
        sizes="(max-width: 767px) 100vw, 300px"
        class="object-cover absolute inset-0 w-full h-full z-0"
      />
    )
  }
  <dl>
    <dt class="sr-only">Published on</dt>
    <dd
      class="text-xs py-0 px-2 font-medium leading-6 text-primary-50 bg-primary-700 rounded-lg m-1 absolute bottom-0 z-10"
    >
      <FormattedDate date={date} />
    </dd>
  </dl>
</div>
